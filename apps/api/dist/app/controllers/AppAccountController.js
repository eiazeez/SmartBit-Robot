'use strict';const a4_0x1593ef=a4_0x2d2c;(function(_0x5bf971,_0xfde5b7){const _0x509b63=a4_0x2d2c,_0x4f055e=_0x5bf971();while(!![]){try{const _0x22a2cc=parseInt(_0x509b63(0x9c))/0x1+-parseInt(_0x509b63(0xa3))/0x2+-parseInt(_0x509b63(0x97))/0x3*(parseInt(_0x509b63(0x94))/0x4)+parseInt(_0x509b63(0x98))/0x5+parseInt(_0x509b63(0x8b))/0x6*(parseInt(_0x509b63(0x95))/0x7)+parseInt(_0x509b63(0xad))/0x8*(parseInt(_0x509b63(0x90))/0x9)+-parseInt(_0x509b63(0xa8))/0xa;if(_0x22a2cc===_0xfde5b7)break;else _0x4f055e['push'](_0x4f055e['shift']());}catch(_0x5a36b3){_0x4f055e['push'](_0x4f055e['shift']());}}}(a4_0x4255,0x49650));function a4_0x2d2c(_0x5baafe,_0x3bb1ab){const _0x425587=a4_0x4255();return a4_0x2d2c=function(_0x2d2c7b,_0x2069aa){_0x2d2c7b=_0x2d2c7b-0x8a;let _0x543592=_0x425587[_0x2d2c7b];return _0x543592;},a4_0x2d2c(_0x5baafe,_0x3bb1ab);}Object[a4_0x1593ef(0xaa)](exports,a4_0x1593ef(0x96),{'value':!![]});function _interopRequireDefault(_0x2be1ce){const _0x4aae98=a4_0x1593ef;return _0x2be1ce&&_0x2be1ce[_0x4aae98(0x96)]?_0x2be1ce:{'default':_0x2be1ce};}function a4_0x4255(){const _0x4c519d=['params','email','height','total','474920XDNeSZ','name','plan','Account\x20not\x20found','../models/Membership','7905180ThMKhP','status','defineProperty','Membership\x20Not\x20Found','imc','8ZvQLbC','update','body','3097098eutPYA','account','default','duration','end','3094047DliSrC','cpf','Membership\x20not\x20found','findOne','102044APhrtt','7mtGfdV','__esModule','30QCcHQe','1771370eNwtMX','json','price','weight','369472suWwLB','show','../models/Account'];a4_0x4255=function(){return _0x4c519d;};return a4_0x4255();}var _Account=require(a4_0x1593ef(0x9e)),_Account2=_interopRequireDefault(_Account),_Membership=require(a4_0x1593ef(0xa7)),_Membership2=_interopRequireDefault(_Membership),_Plan=require('../models/Plan'),_Plan2=_interopRequireDefault(_Plan),_moment=require('moment'),_moment2=_interopRequireDefault(_moment);class SessionAccountController{async['auth'](_0xe423ef,_0x4d8461){const _0x39d23d=a4_0x1593ef,{cpf:_0x2d001d}=_0xe423ef[_0x39d23d(0x8a)],_0xc4b5d1=await _Account2[_0x39d23d(0x8d)][_0x39d23d(0x93)]({'where':{'cpf':_0x2d001d}});if(!_0xc4b5d1)return _0x4d8461[_0x39d23d(0xa9)](0x191)[_0x39d23d(0x8f)]();const _0x5a6bed=await _Membership2['default'][_0x39d23d(0x93)]({'where':{'account_id':_0xc4b5d1['id']},'include':[{'model':_Account2['default'],'as':_0x39d23d(0x8c),'attributes':['id',_0x39d23d(0xa4)]},{'model':_Plan2[_0x39d23d(0x8d)],'as':_0x39d23d(0xa5),'attributes':['id','title',_0x39d23d(0x8e),_0x39d23d(0x9a),_0x39d23d(0xa2)]}]});if(!_0x5a6bed)return _0x4d8461[_0x39d23d(0xa9)](0x191)['json']({'error':'Membership\x20Not\x20Found'});return _0x4d8461[_0x39d23d(0x99)](_0x5a6bed);}async[a4_0x1593ef(0x9d)](_0x275fd1,_0x10670c){const _0x2f3e6f=a4_0x1593ef,{cpf:_0x490b69}=_0x275fd1[_0x2f3e6f(0x9f)],_0x293668=await _Account2['default'][_0x2f3e6f(0x93)]({'where':{'cpf':_0x490b69}});if(!_0x293668)return _0x10670c['status'](0x190)['json']({'error':_0x2f3e6f(0xa6)});const _0x1e73c1=await _Membership2[_0x2f3e6f(0x8d)]['findOne']({'where':{'account_id':_0x293668['id']},'include':[{'model':_Account2[_0x2f3e6f(0x8d)],'as':_0x2f3e6f(0x8c),'attributes':['id',_0x2f3e6f(0xa4),_0x2f3e6f(0xa0),_0x2f3e6f(0x91),_0x2f3e6f(0x9b),_0x2f3e6f(0xa1),_0x2f3e6f(0xac)]},{'model':_Plan2[_0x2f3e6f(0x8d)],'as':_0x2f3e6f(0xa5),'attributes':['id','title',_0x2f3e6f(0x8e),'price','total']}]});if(!_0x1e73c1)return _0x10670c[_0x2f3e6f(0xa9)](0x194)[_0x2f3e6f(0x99)]({'error':_0x2f3e6f(0xab)});return _0x10670c[_0x2f3e6f(0x99)](_0x1e73c1);}async['update'](_0x3f97c0,_0x38c90e){const _0x497215=a4_0x1593ef,{cpf:_0x1d577c}=_0x3f97c0[_0x497215(0x9f)],{weight:_0x219980,height:_0xf764aa}=_0x3f97c0['body'],_0x3d50b8=await _Account2[_0x497215(0x8d)][_0x497215(0x93)]({'where':{'cpf':_0x1d577c}});if(!_0x3d50b8)return _0x38c90e[_0x497215(0xa9)](0x190)[_0x497215(0x99)]({'error':_0x497215(0xa6)});return await _0x3d50b8[_0x497215(0xae)]({'weight':_0x219980,'height':_0xf764aa}),_0x38c90e['json'](_0x3d50b8);}async['delete'](_0x2e2f62,_0x3233b9){const _0x28d57f=a4_0x1593ef,{cpf:_0x427595}=_0x2e2f62[_0x28d57f(0x9f)],_0xdad381=await _Account2[_0x28d57f(0x8d)][_0x28d57f(0x93)]({'where':{'cpf':_0x427595}});if(!_0xdad381)return _0x3233b9['status'](0x194)[_0x28d57f(0x99)]({'error':'Membership\x20not\x20found'});const _0x2ede51=await _Membership2[_0x28d57f(0x8d)][_0x28d57f(0x93)]({'where':{'account_id':_0xdad381['id']}});if(!_0x2ede51)return _0x3233b9[_0x28d57f(0xa9)](0x194)['json']({'error':_0x28d57f(0x92)});return await _0x2ede51['destroy'](),_0x3233b9[_0x28d57f(0xa9)](0xcc)[_0x28d57f(0x8f)]();}}exports[a4_0x1593ef(0x8d)]=new SessionAccountController();